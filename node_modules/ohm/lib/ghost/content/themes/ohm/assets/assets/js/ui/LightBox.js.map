{"version":3,"sources":["../../../../client/js/ui/LightBox.js"],"names":["d3","_","Hammer","isMobile","$lightbox","$thumbs","$figures","$buckets","$instagram","$nextInstagram","$galleries","$loading","$thumbsToggle","document","getElementById","$instagramFeed","getElementsByClassName","LightBox","toString","e","console","log","addEventListener","_hideLightBox","event","stopPropagation","hasClassName","childNodes","length","_showThumbs","bind","each","img","_changeActive","link","_getPhotos","dataset","id","_getInstagram","instagram","_getInstagramFeed","fig","str","nodeName","src","style","backgroundImage","match","replace","_lightBox","window","onkeydown","like","keyCode","_nextPhoto","_previousPhoto","media","_likePhoto","click","extend","prototype","innerHTML","json","error_message","handleErrorMessage","Contents","data","Key","indexOf","li","createElement","appendChild","_showLoading","addClassName","_hideLoading","removeClassName","heart","xhr","querySelectorAll","setAttribute","_loadThumbs","feed","users_in_photo","users","user","push","username","type","images","thumbnail","url","standard_resolution","caption","text","user_has_liked","videos","next","handleError","pics","slice","nxt","target","currentTarget","parentNode","removeChild","liked","_showLightBox","fsImg","display","htmlFrag","split","likables","likeable","cap","node","onload","mc","active","media_id","on","isPortrait","maxWidth","i","w","naturalWidth","width","h","naturalHeight","height","$active","className","_hideThumbs","body","overflow","image","removeAttribute","getAttribute","l","previousElementSibling","firstChild","n","nextElementSibling","toLowerCase"],"mappings":"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","file":"LightBox.js","sourcesContent":["var d3, _, Hammer, isMobile, $lightbox, $thumbs, $figures, $buckets, $instagram, $nextInstagram, $galleries, $loading, $thumbsToggle;\n/**\n * Light.js\n *\n * Copyright (c) 2014 Ohm Labs Inc\n * Licensed under the MIT license\n * For all details and documentation:\n * http://drake.fm/light\n *\n * @version  0.2.0\n * @author     Cameron W. Drake\n * @copyright  Copyright (c) 2014 Ohm Labs\n * @license    Licensed under the MIT license\n \n * @module LightBox Client\n * @requires Underscore\n * @requires D3\n * @requires Hammer\n */\n// Set up the variables we'll need\n$lightbox      = document.getElementById('lightbox_fade');\n$thumbs        = document.getElementById('thumbnails');\n$instagramFeed = document.getElementById('lb-instagram-feed');\n$nextInstagram = document.getElementById('lb-instagram-next');\n$loading       = document.getElementById('loading');\n$figures       = document.getElementsByClassName('lb-expandable');\n$buckets       = document.getElementsByClassName('lb-bucket');\n$instagram     = document.getElementsByClassName('lb-instagram');\n$galleries     = document.getElementsByClassName('lb-gallery');\n$thumbsToggle  = document.getElementsByClassName('lb-thumbs-toggle')[0];\n\nvar LightBox = (function() {\n  'use strict';\n  try {\n    _.toString();\n    d3.toString();\n  } catch (e) {\n    console.log(\"Something is wrong... fall back\");\n    return;\n  }\n  /** Hide LightBox on click */\n  $lightbox && $lightbox.addEventListener('click', this._hideLightBox);\n\n  /** Image Gallery click */\n  $thumbsToggle.addEventListener('click', function(event) {\n    event.stopPropagation();\n    if (!$thumbs.hasClassName('active') && $thumbs.childNodes.length > 0) this._showThumbs();\n  }.bind(this));\n\n  /** Image Gallery click */\n  _.each($galleries, function(img) {\n    img.addEventListener('click', function(event) {\n      event.stopPropagation();\n      this._changeActive(img);\n    }.bind(this));\n  }.bind(this));\n\n  /** S3 Buckets click */\n  _.each($buckets, function(link) {\n    link.addEventListener('click', function(event) {\n      event.stopPropagation();\n      this._getPhotos(link.dataset.id);\n    }.bind(this));\n  }.bind(this));\n\n  /** Instagram click */\n  _.each($instagram, function(link) {\n    link.addEventListener('click', function(event) {\n      event.stopPropagation();\n      this._getInstagram(link.dataset.instagram);\n    }.bind(this));\n  }.bind(this));\n\n  /** Instagram Feed click */\n  $instagramFeed && $instagramFeed.addEventListener('click', function(event) {\n    event.stopPropagation();\n    this._getInstagramFeed();\n  }.bind(this));\n\n  /** Expandable Image click */\n  _.each($figures, function(fig) {\n    var str;\n    if (fig.nodeName === \"IMG\") {\n      str = fig.src;\n    } else if (fig.nodeName === \"FIGURE\") {\n      str = fig.style.backgroundImage.match(/\\((.*?)\\)/)[1].replace(/('|\")/g, '');\n    }\n    fig.addEventListener('click', function(event) {\n      event.stopPropagation();\n      this._lightBox(str, \"upload\");\n    }.bind(this));\n  }.bind(this));\n\n  /** Listen for Next/Last Keys */\n  window.onkeydown = function(e) {\n    var like = document.getElementById('fullscreen');\n    if ($lightbox.hasClassName('active')) {\n      if (e.keyCode === 39) {\n        this._nextPhoto();\n      } else if (e.keyCode === 37) {\n        this._previousPhoto();\n      } else if (e.keyCode === 27) {\n        this._hideLightBox();\n      } else if (e.keyCode === 76 && like && like.dataset.media !== \"undefined\" ) {\n        this._likePhoto();\n      } else if (e.keyCode === 77) {\n        document.getElementById('lb-instagram-next') && document.getElementById('lb-instagram-next').click();\n      } else if (e.keyCode === 84) {\n        this._showThumbs();\n      }\n    }\n  }.bind(this);\n});\n\n_.extend(LightBox.prototype, {\n  /**\n   * Fetch Photos from Amazon S3\n   * @param {string} bucketname The name of the S3 Bucket\n   */\n  _getPhotos: function(id) {\n    'use strict';\n    if (id && $thumbs.hasClassName(id)) {\n      this._showThumbs();\n    } else {\n      $thumbs.innerHTML = \"\";\n      d3.json(\"/s3/\" + id, function(json) {\n        if (json.error_message) handleErrorMessage(json.error_message);\n        _.each(json.Contents, function(data) {\n          if (data.Key.indexOf(\"thumbs/\") === -1) {\n            var li = document.createElement(\"li\");\n            li.innerHTML = '<div class=\"thumbnail\" style=\"background:url(\\'' + 'https://s3.amazonaws.com/' + id + '/thumbs/' + data.Key + '\\');background-size: cover;\" data-full=\"https://s3.amazonaws.com/' + id + '/' + data.Key + '\" data-type=\"image\"></div>';\n            li.addEventListener('click', function(event) {\n              event.stopPropagation();\n              this._changeActive(li.childNodes[0]);\n            }.bind(this));\n            $thumbs.appendChild(li);\n          }\n        }.bind(this));\n        this._showThumbs(id);\n      }.bind(this));\n    }\n  },\n\n  /** Show Loading */\n  _showLoading: function() {\n    $loading.addClassName('active');\n  },\n\n  /**  Show Loading */\n  _hideLoading: function() {\n    $loading.removeClassName('active');\n  },\n\n  /**\n   * Like the Currently Active Photo\n   */\n  _likePhoto: function() {\n    var id = document.getElementById('active-thumb').childNodes[0].dataset.media\n    var heart = document.getElementsByClassName(\"is_liked\")[0];\n    if (heart.hasClassName(\"glyphicon-heart-empty\")){\n      d3.xhr(\"/like/\" + id, function() {\n        var media = '[data-media=\"' + id + '\"]';\n        // set liked to true\n        document.querySelectorAll(media)[0].setAttribute(\"data-liked\", \"true\");\n        // change heart logo\n        heart.removeClassName(\"glyphicon-heart-empty\");\n        heart.addClassName(\"glyphicon-heart\");\n      });      \n    }\n  },\n\n  /**\n   * Load the Thumbnails\n   * @param {string} data Photos\n   * @param {boolean} feed Are these photos from the feed?\n   */\n  _loadThumbs: function(data, feed) {\n    var li = document.createElement(\"li\");\n    if (data.users_in_photo) {\n      var users = [];\n      _.each(data.users_in_photo, function(user) {\n        // users += '<a class=\\\"orange\\\" href=\\\"http://instagram.com/' + user.user.username + '\\\" target=\\\"_blank\\\">@' + user.user.username + '</a> ';\n        users.push(user.user.username);\n      });\n    }\n    if (data.type === \"image\"){\n      li.innerHTML = '<div class=\"thumbnail\" style=\"background:url(\\'' + data.images.thumbnail.url + '\\');background-size: cover;\" data-media=\"' + data.id + '\" data-type=\"' + data.type + '\" data-full=\"' + data.images.standard_resolution.url + '\" data-caption=\"' + (data.caption ? data.caption.text : \"\") + '\" data-liked=\"' + data.user_has_liked + '\" ' + (feed ? \"data-user=\" + data.user.username : \"\") + (users !== \"\" ? ' data-users=\"' + users + '\"' : \"\" ) + '></div>';            \n    } else if (data.type === \"video\") {\n      li.innerHTML = '<div class=\"thumbnail\" style=\"background:url(\\'' + data.images.thumbnail.url + '\\');background-size: cover;\" data-media=\"' + data.id + '\" data-type=\"' + data.type + '\" data-full=\"' + data.videos.standard_resolution.url + '\" data-caption=\"' + (data.caption ? data.caption.text : \"\") + '\" data-liked=\"' + data.user_has_liked + '\" ' + (feed ? \"data-user=\" + data.user.username : \"\") + (users !== \"\" ? ' data-users=\"' + users + '\"' : \"\" ) + '></div>';      \n    }\n    li.addEventListener('click', function(event) {\n      event.stopPropagation();\n      this._changeActive(li.childNodes[0]);\n    }.bind(this));\n    $thumbs.appendChild(li);\n  },\n\n  /**\n   * Fetch Photos from Instagram\n   * @param {string} username Instagram username\n   * @next {string} next If there are more photos\n   */\n  _getInstagram: function(username, next) {\n    'use strict';\n    if (username && !$thumbs.hasClassName(username)) {\n      $thumbs.innerHTML = \"\";\n      this._showThumbs(username);\n    } else if ($thumbs.hasClassName(username) && !next){\n      this._showThumbs();\n      return;\n    }\n    var url;\n    next ? url = \"/instagram/\" + username + '/' + next : url = \"/instagram/\" + username;\n    this._showLoading();\n    d3.json(url, function(json) {\n      if (json.error_message) {\n        this._hideLoading();\n        handleError(json.error_message);\n      } else if (json) {\n        // Load Thumbs\n        var pics = json.slice(0, json.length - 1);\n        var next = json.slice(json.length - 1, json.length);\n        _.each(pics, function (data) {\n          this._loadThumbs(data, false);\n        }.bind(this));\n        // If there are more photos render \"More Photos\" button\n        if (next[0]) {\n          var nxt = document.createElement(\"li\");\n          nxt.setAttribute(\"id\", \"next-button\");\n          nxt.innerHTML = '<button id=\"lb-instagram-next\" class=\"btn btn-default\" data-instagram=\"' + username + '\" data-next=\"' + next + '\">More Photos</button>';\n          nxt.addEventListener('click', function(event) {\n            event.stopPropagation();\n            var link = event.target;\n            this._getInstagram(link.dataset.instagram, link.dataset.next);\n            event.currentTarget.parentNode && event.currentTarget.parentNode.removeChild(event.currentTarget);\n          }.bind(this));\n          $thumbs.appendChild(nxt);\n        }\n        this._hideLoading();\n      }\n    }.bind(this));\n  },\n\n  /**\n   * Fetch Photos from Instagram\n   * @param {string} username Instagram username\n   * @next {string} next If there are more photos\n   */\n  _getInstagramFeed: function(next) {\n    'use strict';\n    if (!$thumbs.hasClassName(\"feed\")) {\n      $thumbs.innerHTML = \"\";\n      this._showThumbs(\"feed\");\n    } else if ($thumbs.hasClassName(\"feed\") && !next){\n      this._showThumbs();\n      return;\n    }\n    var url;\n    next ? url = \"/instafeed/\" + next : url = \"/instafeed/\";\n    this._showLoading();\n    d3.json(url, function(json) {\n      if (json.error_message) {\n        this._hideLoading();\n        handleError(json.error_message);\n      } else if (json) {\n        // Load Thumbs\n        var pics = json.slice(0, json.length - 1);\n        var next = json.slice(json.length - 1, json.length);\n        _.each(pics, function (data) {\n          this._loadThumbs(data, true);\n        }.bind(this));\n        // If there are more photos render \"More Photos\" button\n        if (next[0]) {\n          var nxt = document.createElement(\"li\");\n          nxt.setAttribute(\"id\", \"next-button\");\n          nxt.innerHTML = '<button id=\"lb-instagram-next\" class=\"btn btn-default\" data-next=\"' + next + '\">More Photos</button>';\n          nxt.addEventListener('click', function(event, nxt) {\n            event.stopPropagation();\n            var link = event.target;\n            this._getInstagramFeed(link.dataset.next);\n            event.currentTarget.parentNode.removeChild(event.currentTarget);\n          }.bind(this));\n          $thumbs.appendChild(nxt);\n        }\n        this._hideLoading();\n      }\n    }.bind(this));\n  },\n\n  /**\n   * Show Image in Lightbox\n   * @param {object} img Image URL\n   * @param {object} type Photo or Video\n   * @param {object} liked User has Liked\n   * @param {object} caption Photo Caption\n   * @param {object} user Username of uploader\n   * @param {object} users Users in photo\n   * @param {object} id Media ID\n   */\n  _lightBox: function(img, type, id, liked, caption, user, users) {\n    'use strict';\n    this._showLightBox();\n    var fsImg = document.getElementById('fullscreen_image');\n    fsImg.style.display = \"none\";\n    if (img) {\n      $thumbs.addClassName(\"thumbnails-nav\");\n      $thumbs.removeClassName('active');\n      // Render HTML for Fullscreen\n      var htmlFrag;\n      if (type === \"image\" || type === \"upload\") {\n        htmlFrag = '<img id=\"fullscreen\" alt=\"flier\" src=\"' + img + '\" />';        \n      } else if (type === \"video\") {\n        htmlFrag = '<video id=\"fullscreen\" width=\"640\" height=\"640\" autoplay><source src=\"' + img +'\" type=\"video/mp4\">Your browser does not support the video tag.</video>';\n      }\n      if (type !== \"upload\") {\n        // Add Caption\n        htmlFrag += '<div class=\"caption\">';\n        htmlFrag += '<div id=\"lb-caption\">' +  (user ? \"<a href=\\\"http://instagram.com/\" + user + \"\\\" target=\\\"_blank\\\" ><b class=\\\"orange\\\">\" + user + \":</b></a> \" : \"\") + caption + '</div>';\n        // Container Div for users and like button\n        htmlFrag += '<div class=\"like-container\">';\n        if (users) {\n          users = users.split(',');\n          htmlFrag += '<div class=\"users\">';\n          _.each(users, function(user){\n            // Add Users\n            htmlFrag += '<a href=\"http://instagram.com/' + user +'\" target=\"_blank\">' + user + '</a> ';\n          });\n          htmlFrag += '</div>';\n        }\n        // Add Like Button\n        liked === \"true\" ? htmlFrag += '<div class=\"glyphicon glyphicon-heart is_liked\"></div></div>' : htmlFrag += '<div class=\"glyphicon glyphicon-heart-empty is_liked\"></div>';        \n        htmlFrag += '</div></div>';\n      }\n      fsImg.innerHTML = htmlFrag;\n      fsImg.style.display = \"table-cell\";\n      // Like Photo on Empty Heart Click\n      var likables = document.getElementsByClassName('glyphicon-heart-empty');\n      _.each(likables, function(likeable){\n        likeable.addEventListener('click', function(event){\n          this._likePhoto();\n        }.bind(this));          \n      }.bind(this));\n      // Don't hide lightbox on Caption Click\n      var cap = document.getElementsByClassName('caption')[0];\n      cap && cap.addEventListener('click', function(event) {\n        event.stopPropagation();\n      });\n    }\n    // Add Event listeners on load of fullscreen image\n    var node = document.getElementById('fullscreen');\n    node.onload = function() {\n      node.addEventListener('click', function(event){\n        event.stopPropagation();\n      });\n      var mc = new Hammer(node);\n      var active = document.getElementById('active-thumb');\n      if (active) var media_id = active.childNodes[0].dataset.media;\n      mc.on(\"swiperight\", this._previousPhoto.bind(this));\n      mc.on(\"swipeleft\", this._nextPhoto.bind(this));\n      mc.on(\"doubletap\", this._likePhoto.bind(this));\n      mc.on(\"swipedown\", this._showThumbs.bind(this));\n      if (!isMobile) {\n        isPortrait(node) ? node.style.maxWidth = \"500px\" : node.style.maxWidth = \"800px\";\n      }\n    }.bind(this);\n\n    function isPortrait(i) {\n      var w = i.naturalWidth || i.width,\n        h = i.naturalHeight || i.height;\n      return (h > w);\n    }\n  },\n\n  /** Show Thumbs \n   * @param {string} id\n   */\n  _showThumbs: function(id) {\n    'use strict';\n    var fsImg = document.getElementById('fullscreen_image');\n\n    $thumbsToggle.removeClassName('active');\n    var $active = document.getElementById('active-thumb');\n    $thumbs.className = \"\";\n    $thumbs.addClassName('thumbnails');\n    $thumbs.addClassName('active');\n    if (id) {\n      $thumbs.addClassName(id); \n    }\n\n    fsImg.style.display = \"none\";\n    this._showLightBox();\n  },\n\n  /** Show Thumbs */\n  _hideThumbs: function() {\n    'use strict';\n    $thumbs.removeClassName('active');\n    $thumbsToggle.addClassName('active');\n  },\n\n  /** Show LightBox */\n  _showLightBox: function() {\n    'use strict';\n    $lightbox.addClassName('active');\n    document.body.style.overflow = \"hidden\";\n\n  },\n\n  /** Hide LightBox */\n  _hideLightBox: function() {\n    'use strict';\n    $lightbox.removeClassName('active');\n    document.body.style.overflow = 'auto';\n  },\n\n  /** Change Active */\n  _changeActive: function(image) {\n    'use strict';\n    var $active = document.getElementById('active-thumb');\n    if ($active) {\n      $active.removeAttribute('id');\n    }\n    image.parentNode.id = 'active-thumb';\n    this._lightBox(image.getAttribute(\"data-full\"), image.getAttribute(\"data-type\"), image.getAttribute(\"data-media\"), image.getAttribute(\"data-liked\"), image.getAttribute(\"data-caption\"), image.getAttribute(\"data-user\"), image.getAttribute(\"data-users\"));\n    if ($thumbs.childNodes.length > 0) {\n      $thumbsToggle.addClassName('active');\n    }\n  },\n\n  /** Previous Photo */\n  _previousPhoto: function() {\n    'use strict';\n    var $active = document.getElementById('active-thumb');\n    if($active) var l = $active.previousElementSibling;\n    if (l && $active) {\n      $active.removeAttribute(\"id\");\n      l.id = 'active-thumb';\n      this._changeActive(l.firstChild);\n    }\n  },\n\n  /** Next Photo */\n  _nextPhoto: function() {\n    'use strict';\n    var $active = document.getElementById('active-thumb');\n    if ($active) var n = $active.nextElementSibling;\n    if (n && n.childNodes[0].nodeName.toLowerCase() !== \"button\" && $active) {\n      $active.removeAttribute(\"id\");\n      n.id = 'active-thumb';\n      this._changeActive(n.firstChild);\n    } else if (n) {\n      n.childNodes[0].click();\n    }\n  }\n});\n"]}